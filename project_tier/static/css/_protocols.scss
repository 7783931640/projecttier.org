#protocol-intro-sections {
  background-image: url('../img/workshop-light.jpg');
  background-size: cover;
  background-attachment: fixed;
  background-color: $white;
  margin-bottom: -($large-gutter);
  box-shadow: 
      inset 0px 10px 22px -13px rgba(0,0,0,0.5);
}



/* ==========================================================================
   PROTOCOL LAYOUT PAGES
   ========================================================================== */
.protocol-layout {
  background-image: linear-gradient(90deg, $callout-bg-highlight, $callout-bg-shadow);
  box-shadow: inset 10px 0px 8px -8px rgba(0,0,0,0.2);

  .page-header {
    background: none;
    box-shadow: inset 24px 24px 12px -20px rgba(0,0,0,0.1);
  }
}


/* ==========================================================================
   OFF CANVAS MENU / PROTOCOL NAV
   ========================================================================== */
.off-canvas-wrapper {
  background-color: $pale-grey;
  background-image: linear-gradient(90deg, $light-grey, $pale-grey $offcanvas-size, $pale-grey);
  .off-canvas-wrapper-inner {
    &.is-open-left {
      transform: translateX($offcanvas-size);
    }
  }
}
.off-canvas-content {
  box-shadow: none;
  overflow: hidden;
}
.off-canvas {
  background: none;
}





/* ==========================================================================
   COMPONENT NAV
   ========================================================================== */

@mixin heirarchy-list(
  $depth: 0, 
  $indent: $medium-gutter,
  $line-color: transparentize( $dark-teal, 0.6)
  ){

  position: relative;
  z-index: 1;
  list-style: none;
  margin: 0;

  > li {
    > a {
      position: relative;
      z-index: 1;
      padding-left: $indent * 1.75 + ( $indent * $depth );
      &::before {
        content: '';
        position: absolute;
        z-index: 2;
        left: $indent + ( $indent * $depth );
        height: 100%;
        width: 1px;
        background: $line-color;
      }
      &::after {
        content: '';
        position: absolute;
        z-index: 2;
        height: 1px;
        width: $indent/2;
        left: $indent + ( $indent * $depth );
        top: 50%;
        background: $line-color;
      }
    }
    > ol {
      &::before {
        content: '';
        position: absolute;
        z-index: 3;
        left: ( $indent * $depth ) + $indent/3;
        height: 100%;
            width: 1px;
            background: $line-color;
      }
    }
    &:last-child {
      > a {
        &::before {
          height: 50%;
        }
      }
      > ol {
        &::before {
          display: none;
        }
      }
    }
  }
}



.component-nav {

  > ol > li > ol {
    @include heirarchy-list(0);
    > li > ol {
      @include heirarchy-list(1);
      > li > ol {
        @include heirarchy-list(2);
        > li > ol {
          @include heirarchy-list(3);
          > li > ol {
            @include heirarchy-list(4);
            > li > ol {
              @include heirarchy-list(5);
            }
          }
        }
      }
    }
  }
  ol {
    list-style: none;
    margin: 0;
    li {
      a {
        font-size: rem-calc(17);
        display: block;
        position: relative;
        box-shadow: none;
        line-height: 2;
        font-weight: 900;
        padding-left: $small-gutter;
        margin-right: -($small-gutter);
        margin-left: -($small-gutter);
        transition:
          color 0.2s,
          background 0.2s,
          box-shadow 0.2s;
        
        i {
          position: relative;
          z-index: 2;
        }
        &:hover {
          background: $pale-grey;
          box-shadow:
            inset 10px 0px 8px -8px rgba(0,0,0,0.2);
        }
        .sidebar & {
          &:hover, &.highlight {
            background-color: $light-grey;
            &.active {
              color: $red;
            }
          }
        }
      }

      &.active {
        > a {
          background: lighten($light-teal, 15%);
          color: $black;
          box-shadow:
            inset 10px 0px 8px -8px rgba(0,0,0,0.2);
          &:hover {
            background-color: $pale-grey;
            color: $red;
          }
        }
      }
    }
  }
}